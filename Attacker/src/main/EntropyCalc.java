// With my computer as my forge, I craft this code in dedication to the Lame One, whom is my patron and whom I love. 

package main;

public class EntropyCalc {

	public static void main(String[] args) {
		String message = "\n" + 
				"\n" + 
				"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec pellentesque sed ex nec consectetur. Nullam consequat urna libero, eget aliquam nisi mattis non. Praesent facilisis tellus ut velit dictum eleifend. Mauris eu ornare mauris. Donec vel ipsum et urna pretium egestas vel eu quam. Fusce pellentesque lacus vel sapien auctor commodo non id nunc. Nunc sed augue non odio pellentesque accumsan. Curabitur quis faucibus dolor. Suspendisse potenti.\n" + 
				"\n" + 
				"Vestibulum vitae euismod massa. Nullam accumsan sagittis metus. Phasellus nisi nunc, blandit eget tristique eu, congue sed tellus. Quisque nec mattis erat. Nullam at mi vel sapien iaculis dapibus nec ac est. In dolor arcu, fermentum sit amet ex id, hendrerit feugiat nunc. In hac habitasse platea dictumst. In iaculis ligula in posuere ornare. Vivamus pellentesque vulputate pulvinar.\n" + 
				"\n" + 
				"Quisque ut iaculis enim. Integer quis luctus nunc. Nunc accumsan, nunc ac tincidunt dapibus, diam lorem tempus metus, eu tristique diam sem vitae nibh. Etiam eu sapien eu arcu iaculis sollicitudin pharetra tempor nibh. Nunc ipsum dolor, congue nec leo sit amet, mattis faucibus justo. Pellentesque non rhoncus nibh. Mauris odio turpis, tincidunt ac posuere nec, facilisis sed ex. Proin sit amet congue sapien, et consectetur mauris.\n" + 
				"\n" + 
				"Aliquam tristique dui non nisl varius, sit amet vehicula neque malesuada. Vivamus tortor sem, mollis id sapien vel, porttitor auctor sem. Pellentesque pellentesque, arcu in consequat condimentum, nisl felis congue lacus, a fringilla dolor lacus id orci. Proin in posuere enim, vitae sollicitudin tortor. Donec sed vulputate leo, at congue diam. Etiam eget porttitor mi. Sed accumsan non justo nec luctus. Fusce a aliquam magna, in dignissim nibh. Aliquam eu luctus elit. Vestibulum lobortis augue at facilisis hendrerit. Nulla venenatis, lacus ac vulputate ullamcorper, sem erat interdum nisi, sed aliquet augue augue eu eros. In neque dolor, hendrerit et sem at, efficitur elementum quam. Curabitur mollis quam id turpis ornare gravida. Maecenas malesuada fermentum imperdiet.\n" + 
				"\n" + 
				"Vestibulum scelerisque nulla urna, eget semper turpis ullamcorper vitae. Ut pulvinar urna ac ex pretium, sit amet posuere eros tristique. Suspendisse vulputate est ut eros viverra tempus. Nam ut nisl varius tortor ullamcorper elementum a facilisis nisi. Etiam aliquet quis felis a aliquet. Aliquam tempus, risus non posuere viverra, orci odio condimentum est, nec bibendum ligula est nec ante. Quisque eros erat, mollis non efficitur vitae, ultrices quis ipsum. Donec risus urna, condimentum at ligula convallis, imperdiet tempor ligula. Ut blandit ut magna in tristique.\n" + 
				"\n" + 
				"Aliquam vel gravida neque, et interdum orci. Pellentesque lacinia, arcu sit amet varius pharetra, tortor purus molestie risus, non sagittis nulla risus eu libero. Morbi nunc erat, placerat eget metus vitae, hendrerit suscipit ante. Duis in finibus urna. Sed scelerisque mi nisl, nec aliquet risus porttitor vitae. Sed in libero at odio venenatis ultricies at vel augue. Ut semper nec purus a congue. Quisque felis mi, ullamcorper at dignissim eget, tristique eget lectus. Vestibulum tristique tempus gravida.\n" + 
				"\n" + 
				"Donec eleifend velit nisi, in scelerisque tellus consectetur quis. Cras vel nunc sed magna malesuada eleifend vitae et enim. Quisque cursus vitae purus quis lobortis. Aliquam et diam egestas, faucibus massa id, porta mi. Vestibulum sit amet ipsum ac sem laoreet dignissim. Mauris ac lacus in sem blandit posuere et at tortor. Vestibulum sed eleifend nibh, eget pharetra urna. Nulla lorem mi, congue sit amet est ut, blandit pellentesque quam. Maecenas ac malesuada libero. Sed in dolor non ipsum mollis ultrices. Aenean in arcu eu lectus volutpat lobortis vitae ut dolor. Donec nec semper quam, ac maximus enim. Aliquam sit amet nisi eros.\n" + 
				"\n" + 
				"Donec molestie dapibus mattis. Maecenas mattis augue lacus, sit amet pellentesque elit maximus sit amet. Integer hendrerit egestas porta. Pellentesque iaculis iaculis leo, vel aliquet neque ullamcorper sit amet. Nullam est orci, fringilla maximus dui et, vehicula pharetra libero. Cras nunc ligula, viverra sit amet metus in, commodo tincidunt diam. Praesent pharetra ullamcorper dolor. Aenean in pretium eros.\n" + 
				"\n" + 
				"Morbi maximus nunc mi. Etiam id eros ut metus consequat auctor. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Nam hendrerit odio ac pharetra cursus. Nullam et velit libero. Pellentesque sed scelerisque magna. Pellentesque libero tortor, dapibus sed vestibulum vitae, dignissim nec sem. Nam vitae enim id diam commodo faucibus. Donec a commodo magna.\n" + 
				"\n" + 
				"Vestibulum laoreet mauris eu posuere elementum. Aliquam tempus lacus sed dolor malesuada pharetra. Proin lectus dolor, convallis id purus vel, commodo congue sem. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Donec vitae sapien magna. Maecenas pulvinar magna nisi, eu dignissim eros aliquam posuere. Quisque sit amet pharetra enim.\n" + 
				"\n" + 
				"Sed varius malesuada dui quis rhoncus. Nunc quam velit, cursus eget fermentum id, auctor eu ligula. Nullam malesuada quis eros eget accumsan. Sed facilisis nibh vitae urna dignissim maximus in non magna. Sed lorem orci, finibus vel velit condimentum, vehicula scelerisque nibh. Pellentesque porta venenatis nunc. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus elementum, mauris sed convallis sodales, neque purus pellentesque metus, vehicula sodales dolor est id orci. Nullam varius eget felis sit amet malesuada. Duis facilisis, eros in venenatis sodales, massa turpis condimentum tellus, eu fermentum nisi neque consequat dui. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Donec suscipit tincidunt feugiat. Aenean pretium volutpat nulla, ut semper sapien venenatis sed.\n" + 
				"\n" + 
				"Etiam in congue ante. Duis ac urna nisl. Sed viverra nisl elit, sit amet pulvinar mauris lobortis ac. Morbi finibus viverra erat vitae tempus. In maximus facilisis consequat. Phasellus ut elit et nulla suscipit mollis in id massa. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Cras placerat faucibus ipsum in vestibulum.\n" + 
				"\n" + 
				"Nullam at varius risus. Sed sodales suscipit purus a lobortis. Nam accumsan justo et velit laoreet mattis. Curabitur fermentum suscipit mauris, et ultrices ex luctus ut. Vestibulum ullamcorper elit eget magna tincidunt, non gravida nibh euismod. In mattis, sapien sit amet ultrices varius, nibh turpis sodales enim, faucibus ultricies nisi diam id sapien. Nullam ullamcorper in nunc a vulputate. Interdum et malesuada fames ac ante ipsum primis in faucibus. Proin varius justo et diam dictum, in dapibus nibh venenatis. Donec dignissim turpis suscipit maximus gravida. Morbi. ";

		int[][] key2x2a = {{2, 3}, {5, 7}}; 
		int[][] key2x2b = {{2, 1}, {13, 6}}; 
		int[][] key2x2c = {{1, 2}, {6, 13}}; 
		int[][] key2x2d = {{1, 3}, {7, 20}}; 
		int[][] key2x2e = {{3, 1}, {20, 7}}; 

		int[][] key3x3a = {{13, 2, 3},{4, 0, 5},{7, 21, 2}};
		int[][] key3x3b = {{13, 2, 3},{4, 0, 5},{7, 21, 2}};
		int[][] key3x3c = {{4, 0, 5},{13, 2, 3},{7, 21, 2}};
		
		int[][] key4x4a = {{2, 20, 3, 4},{8, 7, 6, 5},{9, 10, 0, 12},{13, 14, 15, 16}};

		System.out.println(MatrixEncrypt.encrypt2x2(message, key2x2a).length());
		System.out.println(calcEntropy(message));		
		System.out.println(calcEntropy(MatrixEncrypt.encrypt2x2(message, key2x2a)));
		System.out.println(calcEntropy(MatrixEncrypt.encrypt2x2(message, key2x2b)));
		System.out.println(calcEntropy(MatrixEncrypt.encrypt2x2(message, key2x2c)));
		System.out.println(calcEntropy(MatrixEncrypt.encrypt2x2(message, key2x2d)));
		System.out.println(calcEntropy(MatrixEncrypt.encrypt2x2(message, key2x2e)));

		System.out.println(calcEntropy(MatrixEncrypt.encrypt3x3(message, key3x3a)));
		System.out.println(calcEntropy(MatrixEncrypt.encrypt3x3(message, key3x3b)));
		System.out.println(calcEntropy(MatrixEncrypt.encrypt3x3(message, key3x3c)));
		
		System.out.println(calcEntropy(MatrixEncrypt.encrypt4x4(message, key4x4a)));
	}
	
	public static double calcEntropy(String message) {
		message = message.toUpperCase();
		double result = 0;
		int[] freq = new int[26];
		int count = 0;
		
		for(int i = 0; i < message.length(); i++) {
			if(message.charAt(i) >= 'A' && message.charAt(i) <= 'Z') {
				freq[message.charAt(i) - 'A']++;
				count ++;
			}
		}

		Letter[] sort = new Letter[26];
		
		for(int i = 0; i < 26; i++) {
			sort[i] = new Letter((char)(i+'A'), (double)freq[i]/count); 
		}
		
		for(Letter l : sort) {
			if(l.freq != 0)
				result += l.freq * Math.log(l.freq);
		}
		
		result *= -1;
		
		return result;
	}

}
